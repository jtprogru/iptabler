# iptabler

Простой сервис для централизованного управления правилами iptables на твоей инфраструктуре.

## TODO

Server:
- Знает все адреса client;
- Знает все группы client;
- Получает информацию о новых группах клиентов из `config.yaml`;
- Получает информацию о новых клиентах из `config.yaml`;
- Источником конфигурации может быть git репозиторий;
- Добавление новых правил iptables в группы осуществляется через yaml;
- Правила из нескольких групп объединяются перед отправкой клиенту;
- Может работать по pull/push схеме:
  - pull - ждет когда клиент заберет все правила для себя;
  - push - сам толкает правила в клиента;

Client:
- Может работать по pull/push схеме: схема работы задется через конфиг;
- Знает адрес server;
- Получает обновления от server;
- Применяет локально полученные правила;
- Слушает на TCP-порту входящие запросы от server с обновлениями;
- Может работать в двух режимах обработки правил:
  - Client всегда прав – любые внешние изменения перетираются информацией от server;
  - Client дополняет – любые внешние изменения в правилах оставляются без изменений, но гаратированно дополняются правилами от server;

